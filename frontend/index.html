<!DOCTYPE html>
<html>
<head>
    <title>Serverless Help Desk</title>
    <style>
        body { font-family: sans-serif; max-width: 600px; margin: 50px auto; padding: 20px; background-color: #f4f4f4; }
        .container { background: white; padding: 30px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        h1 { color: #333; text-align: center; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }
        button { width: 100%; background-color: #FF9900; color: white; border: none; padding: 12px; cursor: pointer; font-size: 16px; border-radius: 4px; font-weight: bold; }
        button:hover { background-color: #e68a00; }
        #message { margin-top: 20px; padding: 15px; border-radius: 4px; display: none; text-align: center; }
        .success { background-color: #dff0d8; color: #3c763d; border: 1px solid #d6e9c6; }
        .error { background-color: #f2dede; color: #a94442; border: 1px solid #ebccd1; }
    </style>
</head>
<body>

    <div class="container">
        <h1>üìù Submit a Ticket</h1>
        
        <div class="form-group">
            <label>Your Email:</label>
            <input type="email" id="email" placeholder="name@example.com">
        </div>

        <div class="form-group">
            <label>Describe the Issue:</label>
            <textarea id="issue" rows="4" placeholder="My VPN is not connecting..."></textarea>
        </div>

        <button onclick="submitTicket()">Submit Ticket</button>

        <div id="message"></div>
    </div>

    <script>
        // ‚ö†Ô∏è PASTE YOUR API GATEWAY URL HERE (Keep the /ticket at the end)
        const API_URL = "https://YOUR_API_ID.execute-api.eu-central-1.amazonaws.com/ticket"; 

        async function submitTicket() {
            const email = document.getElementById('email').value;
            const issue = document.getElementById('issue').value;
            const msgDiv = document.getElementById('message');

            if(!email || !issue) {
                alert("Please fill in both fields");
                return;
            }

            // Show loading state
            msgDiv.style.display = 'none';
            const btn = document.querySelector('button');
            const originalText = btn.innerText;
            btn.innerText = "Submitting...";
            btn.disabled = true;

            try {
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email: email, issue: issue })
                });

                if (response.ok) {
                    msgDiv.className = 'success';
                    msgDiv.innerHTML = "‚úÖ Success! Ticket created & Admin notified.";
                    msgDiv.style.display = 'block';
                    // Clear form
                    document.getElementById('email').value = "";
                    document.getElementById('issue').value = "";
                } else {
                    throw new Error("API Request Failed");
                }
            } catch (error) {
                console.error(error);
                msgDiv.className = 'error';
                msgDiv.innerHTML = "‚ùå Error submitting ticket. Check console.";
                msgDiv.style.display = 'block';
            } finally {
                btn.innerText = originalText;
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>
